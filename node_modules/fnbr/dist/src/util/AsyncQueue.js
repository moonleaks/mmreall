"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Represents an asynchronous task queue used for meta patches
 * @private
 */
class AsyncQueue {
    constructor() {
        this.tasks = [];
    }
    /**
     * The amount of queued tasks
     */
    get length() {
        return this.tasks.length;
    }
    /**
     * Adds a task to the queue
     */
    wait() {
        const first = this.tasks.length ? this.tasks[this.tasks.length - 1].promise : Promise.resolve();
        let preResolve;
        const promise = new Promise((res) => {
            preResolve = res;
        });
        const resolve = preResolve;
        this.tasks.push({ resolve, promise });
        return first;
    }
    /**
     * Resolves the first task from the queue
     */
    shift() {
        const first = this.tasks.shift();
        if (typeof first !== 'undefined')
            first.resolve();
    }
}
exports.default = AsyncQueue;
//# sourceMappingURL=AsyncQueue.js.map